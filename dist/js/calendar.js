function M({view:u="dayGridMonth",locale:v="en",firstDay:f=1,dayMaxEvents:w=!1,eventContent:l=null,eventClickEnabled:h=!1,eventDragEnabled:i=!1,eventResizeEnabled:d=!1,noEventsClickEnabled:m=!1,dateClickEnabled:D=!1,dateSelectEnabled:c=!1,datesSetEnabled:E=!1,viewDidMountEnabled:g=!1,eventAllUpdatedEnabled:O=!1,hasDateClickContextMenu:S=null,hasDateSelectContextMenu:C=null,hasEventClickContextMenu:p=null,hasNoEventsClickContextMenu:z=null,resources:y=null,resourceLabelContent:r=null,theme:o=null,options:$={},eventAssetUrl:x}){return{init:function(){let n=this.mountCalendar();window.addEventListener("calendar--refresh",()=>{n.refetchEvents()}),this.$wire.on("calendar--set",e=>{n.setOption(e.key,e.value)})},mountCalendar:function(){return EventCalendar.create(this.$el.querySelector("[data-calendar]"),this.getSettings())},getSettings:function(){let n={view:u,locale:v,firstDay:f,dayMaxEvents:w,eventSources:[{events:e=>this.$wire.getEventsJs({...e,tzOffset:-new Date().getTimezoneOffset()})}],resources:y,selectable:c,eventStartEditable:i,eventDurationEditable:d,dayCellFormat:e=>e.getDate().toString()};return l!==null&&(n.eventContent=e=>{let t=e.event.extendedProps.model,s=l[t]??l._default;if(s!==void 0)return{html:s}}),r!==null&&(n.resourceLabelContent=e=>{let t=e.resource.extendedProps.model,s=r[t]??r._default;if(s!==void 0)return{html:this.wrapContent(s,e)}}),D&&(n.dateClick=e=>{let t={date:e.date,dateStr:e.dateStr,allDay:e.allDay,view:e.view,resource:e.resource,tzOffset:-new Date().getTimezoneOffset()};console.debug("[calendar] dateClick",t),S?this.openContextMenu(e.jsEvent,t,"dateClick"):this.$wire.onDateClickJs(t)}),c&&(n.select=e=>{let t={start:e.start,startStr:e.startStr,end:e.end,endStr:e.endStr,allDay:e.allDay,view:e.view,resource:e.resource,tzOffset:-new Date().getTimezoneOffset()};console.debug("[calendar] dateSelect",t),C?this.openContextMenu(e.jsEvent,t,"dateSelect"):this.$wire.onDateSelectJs(t)}),E&&(n.datesSet=e=>{this.$wire.onDatesSetJs({start:e.start,startStr:e.startStr,end:e.end,endStr:e.endStr,view:e.view,tzOffset:-new Date().getTimezoneOffset()})}),h&&(n.eventClick=e=>{try{console.debug("[calendar] eventClick",e.event);let t=e.el||e.jsEvent&&e.jsEvent.target||null,s=null;if(t)try{s=Alpine.$data(t)}catch{}if(s&&typeof s.onClick=="function"){s.onClick(e);return}this.$wire.onEventClickJs({event:e.event,view:e.view,tzOffset:-new Date().getTimezoneOffset()})}catch(t){console.error("[calendar] eventClick handler error",t)}}),n.eventResize=async e=>{let t=e.event.durationEditable,s=d;t!==void 0&&(s=t),s&&await this.$wire.onEventResizeJs({event:e.event,oldEvent:e.oldEvent,endDelta:e.endDelta,view:e.view,tzOffset:-new Date().getTimezoneOffset()}).then(a=>{a===!1&&e.revert()})},n.eventDrop=async e=>{let t=e.event.startEditable,s=i;t!==void 0&&(s=t),s&&await this.$wire.onEventDropJs({event:e.event,oldEvent:e.oldEvent,oldResource:e.oldResource,newResource:e.newResource,delta:e.delta,view:e.view,tzOffset:-new Date().getTimezoneOffset()}).then(a=>{a===!1&&e.revert()})},n.eventDidMount=e=>{e.el.classList.contains("ec-preview")||(e.el.setAttribute("data-calendar-event","1"),e.el.setAttribute("x-load"),e.el.setAttribute("x-load-src",x),e.el.setAttribute("x-data",`calendarEvent({
                    event: ${JSON.stringify(e.event)},
                    timeText: "${e.timeText}",
                    view: ${JSON.stringify(e.view)},
                    hasContextMenu: ${p},
                })`))},m&&(n.noEventsClick=e=>{let t={view:e.view,tzOffset:-new Date().getTimezoneOffset()};z?this.openContextMenu(e.jsEvent,t,"noEventsClick"):this.$wire.onNoEventsClickJs(t)}),g&&(n.viewDidMount=e=>{this.$wire.onViewDidMountJs({view:e.view,tzOffset:-new Date().getTimezoneOffset()})}),O&&(n.eventAllUpdated=e=>{this.$wire.onEventAllUpdatedJs({view:e.view,tzOffset:-new Date().getTimezoneOffset()})}),o&&(n.theme=function(e){return{...e,...o}}),{...n,...$}},wrapContent:function(n,e){let t=document.createElement("div");return t.innerHTML=n,t.setAttribute("x-data",JSON.stringify(e)),t.classList.add("w-full"),t.outerHTML},openContextMenu:function(n,e,t){let s=document.querySelector("[calendar-context-menu]"),a=Alpine.$data(s);console.debug("[calendar] openContextMenu",t,e),a.loadActions(t,e),a.openMenu(n)}}}export{M as default};
